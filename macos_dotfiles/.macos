#!/bin/env bash
#
#   _ __ ___   __ _  ___ ___  ___ 
#  | '_ ` _ \ / _` |/ __/ _ \/ __|
# _| | | | | | (_| | (_| (_) \__ \
#(_)_| |_| |_|\__,_|\___\___/|___/
#
#

# Close any open System Preferences, to prevent overrindig changes of this script
osascript -e 'tell application "System Preferences" to quit'                                 
# Ask for administrator password upfront
sudo -v

# Keep-alive: update sudo timestamp until .macos has finished
while true; do sudo -n true; sleep 60; kill -0 "$$" || exit; done 2>/dev/null &

###############################################################################
# Dock, Dashboard, and hot corners                                            #
###############################################################################

# Set icon size to 39 pixels
defaults write com.apple.dock tilesize -int 39

# Enable magnification
defaults write com.apple.dock magnification -bool true

# Set magnification to 50 pixels
defaults write com.apple.dock largesize -int 50

# Minimize windows to their application icon
defaults write com.apple.dock minimize-to-application -bool true

###############################################################################
# General UI/UX                                                               #
###############################################################################

# Set sidebar icon size to small (1:small (default in <10.15), 2:medium (Catalina default), 3:big)
defaults write NSGlobalDomain NSTableViewDefaultSizeMode -int 1

# Always show scrollbars
defaults write NSGlobalDomain AppleShowScrollBars -string "Always"
# Possible values: `WhenScrolling`, `Automatic` and `Always`

# Save to disk (not to iCloud) by default
defaults write NSGlobalDomain NSDocumentSaveNewDocumentsToCloud -bool false

# Disable the “Are you sure you want to open this application?” dialog (CAUTION when download from unknown sources)
defaults write com.apple.LaunchServices LSQuarantine -bool false

# Disable automatic capitalization as it’s annoying when typing code
defaults write NSGlobalDomain NSAutomaticCapitalizationEnabled -bool false

# Disable auto-correct
defaults write NSGlobalDomain NSAutomaticSpellingCorrectionEnabled -bool false

# Set the timezone; see `sudo systemsetup -listtimezones` for other values
sudo systemsetup -settimezone "Europe/Brussels" > /dev/null
